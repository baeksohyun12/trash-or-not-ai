# 리스크 관리 문서

> **작성자**: 고지운 (Frontend Developer) <br>
> **담당 파트**: 사진 업로드 화면, 로딩 화면면, AI 분석 기반 결과 화면, 미니 게임 구현<br>
> **작성 일자**: 2025.12.20 

---

## 1. 디자인 협업 및 구현 최적화

### 문제 1: 픽셀 퍼펙트 구현과 개발 효율성 간의 문제

* **발생 상황**:
    * 디자이너가 의도한 버튼의 미세한 그림자, 고유한 이미지 에셋, 간격, 색상 등의 디테일을 최대한 동일하게 구현하려다 보니 예상보다 퍼블리싱 시간이 2배 이상 소요됨

* **해결 과정**: 
    * **우선순위 협의**: 디자이너와 회의를 통해 '**반드시 지켜야 할 핵심 디자인**'과 '**CSS 표준으로 타협 가능한 부분**'을 명확히 구분하여 개발 속도 확보
    * **타협점 도출**: 모든 요소를 이미지로 처리하면 로딩이 느려지므로 일부 그래픽 요소는 CSS(`border-radius`, `box-shadow`)로 대체하되 디자이너의 검수를 거쳐 퀄리티를 승인받음

### 문제 2: 로딩 화면의 동적 콘텐츠 배치 문제

* **발생 상황**:
    * 로딩 대기 시간을 지루하지 않게 하기 위해 '**환경 보호 격려 명언**'을 랜덤으로 띄우기로 기획했으나 명언마다 문장 길이가 제각각이라 텍스트 줄바꿈이 발생하고 레이아웃이 깨지는 현상 발생

* **해결 과정**:
    * **로직 구현**: JavaScript `Math.random()` 함수와 배열을 활용하여 로딩 시마다 다른 텍스트가 출력되도록 기능을 구현
    * **레이아웃 고정**: 디자이너와 협의하여 텍스트가 들어갈 **최대 영역**을 미리 확보하고 기존 폰트 사이즈에서 글자 길이에 맞게 폰트 사이즈를 수정


## 2. 3D 공간 구축 및 렌더링

### 문제 1: 웹 환경에서의 3D 공간 좌표계 설정 난이도

* **발생 상황**: 위에 깊이감이 있는 3D 공간을 구현하려다 보니 카메라의 위치(`z`축)와 조명의 각도를 맞추기가 어려워 지구가 너무 작게 보이거나 찌그러져 보이는 왜곡 현상 발생

* **해결 과정**:
    * **PerspectiveCamera 최적화**: 사람의 눈과 가장 유사한 원근감을 주는 `PerspectiveCamera`를 채택하고, 화면 비율(`aspect ratio`)에 따라 시야각을 동적으로 계산하여 반응형 3D 뷰어로 구현
    * **렌더러 투명도 설정**: `WebGLRenderer({ alpha: true })` 옵션을 적용하여 3D 캔버스의 배경을 투명하게 처리함으로써 기존 웹사이트의 배경 디자인과 이질감 없이 융합되도록 처리

### 문제 2: 지구 텍스처 매핑의 부자연스러움


* **발생 상황**: 평면 이미지를 구체에 입혔을 때 이미지가 늘어나거나 접합부가 어색하게 보이는 문제

* **해결 과정**:
    * **UV 매핑 이해 및 적용**: `SphereGeometry`의 세그먼트 수를 `32` 이상으로 높여 구체를 부드럽게 만들고 텍스처가 자연스럽게 감싸지도록 매핑 좌표 조정
    * **애니메이션 루프 최적화**: `requestAnimationFrame`을 사용하여 매 프레임마다 `rotation.y` 값을 변경하고 끊김 없는 부드러운 자전 애니메이션 구현

### 제안: 밋밋한 로딩 경험 개선을 위한 기술 스택 변경 제안

* **발생 상황**:
    * 초기 기획 단계에서는 AI 분석 대기 화면에 단순한 '2D 지구 이미지'를 삽입하기로 결정
    * 그러나 실제 구현 검토 결과, 수 초(3~5초)간 지속되는 로딩 시간 동안 사용자가 정지된 페이지만 바라보는 것은 지루함을 유발하고 앱이 멈춘 듯한 부정적인 경험(UX) 을 줄 우려가 있다고 판단

* **해결 과정**:
    * **능동적 제안**: 정적인 2D 이미지 대신, 웹 환경에서도 역동적인 표현이 가능한 **Three.js(WebGL)** 라이브러리를 도입하여 '스스로 자전하는 3D 지구'를 구현하자고 팀과 디자이너에게 역제안함
    * **기술 구현**: 제안이 채택된 후 `SphereGeometry`와 텍스처 매핑을 활용하여 지구를 모델링하고 애니메이션 루프를 적용하여 시각적 만족도를 높임

## 3. 개발 환경 및 협업 이슈

### 문제: 로컬 서버 포트 불일치로 인한 지도 API 로드 실패
* **발생 상황**:
    * 다른 팀원이 구현한 지도 API 기능이 내 로컬 환경에서만 `401 Unauthorized` 에러를 띄우며 지도가 렌더링되지 않음
    * 동일한 코드를 사용함에도 실행되지 않아 코드 로직 문제로 오판하고 원인 파악에 긴 시간을 소요

* **원인 분석**:
    * **API 보안 정책**: 카카오맵 등 지도 API는 보안을 위해 등록된 도메인(`http://127.0.0.1:5500`)에서 온 요청만 허용
    * **Live Server 특성**: 내 컴퓨터에서 이미 다른 프로젝트로 인해 `5500`포트가 사용 중이었고 VS Code Live Server가 자동으로 포트를 `5501`로 변경하여 실행하면서 도메인 불일치로 차단됨

* **해결 과정**: 
    * **환경 변수 통일**: 실행 중인 다른 서버를 종료하고 재실행하여 포트 번호를 `5500`으로 일치시킴
    * **환경 설정 강제화**: 매번 포트를 확인하는 번거로움을 줄이기 위해 프로젝트 루트의 `.vscode/settings.json` 파일을 생성하여 Live Server의 포트를 `5500`으로 고정하는 설정 추가
     ```json
    {
        "liveServer.settings.port": 5500
    } 
    ```
    * **효과**: 이 설정을 통해 다른 서버가 켜져 있더라도 강제로 5500번 포트를 점유하거나 경고를 띄우게 하여 개발 환경의 일관성을 시스템적으로 보장


## 4. ES6 모듈 종속성 및 스크립트 실행 오류

### 문제: 개발 환경 불일치 및 외부 API 인증 오류 발생 상황

* **발생 상황**: 
    * `game.js`와 `main.js` 간의 모듈 연동 과정에서 `Uncaught SyntaxError` 및 `export` 참조 오류 발생
    * 스크립트 로드 실패로 인해 게임 로직 및 지도 API 호출이 차단되는 블로킹 현상 발생

* **원인 분석**:
    * **모듈 경로 및 명명 규칙 오류**: 파일을 분리하는 과정에서 `import` 경로 설정이 빗나가거나, `export` 된 함수명과 `import`하는 이름이 일치하지 않아 발생한 문법 오류
    * **브라우저 캐싱**: 모듈 타입 스크립트의 경우 브라우저가 강력하게 캐싱하는 경향이 있어 코드 변경 사항이 즉시 반영되지 않음

* **해결 과정**: 
    * **모듈 구조 최적화**: `game.js`와 `main.js`의 역할 분리를 명확히 유지하되 `main.js`를 진입점으로 설정하여 의존성 흐름 정립 
    * **ES6 문법 교정**: 
        ```javascript
        import { startGame, stopGame, RECYCLABLES } from './game.js';
        ```
        위 코드와 같이 정확한 상대 경로와 문법을 적용하여 참조 오류 해결
    * **HTML 속성 유지**: `<script type="module">`속성을 올바르게 사용하여 브라우저가 ES6 모듈을 인식하도록 설정

* **결과**:
    * **성공적인 모듈화**: 기능 단위로 파일을 분리하는데 성공하여 코드의 가독성과 유지보수성을 높임
    * **안정적 실행**: 게임 로직과 지도 API가 의도된 순서대로 충돌 없이 로드됨